{"version":3,"sources":["./src/app/shared/components/yandex-heat-map/yandex-heat-map.module.ts","./src/app/shared/services/yandex-map/yandex-map.service.ts","./src/app/shared/components/yandex-heat-map/yandex-heat-map.component.ts","./src/app/shared/components/yandex-heat-map/yandex-heat-map.component.html","./src/app/shared/components/yandex-maps/yandex-maps.module.ts","./src/app/shared/components/yandex-maps/yandex-maps.component.ts","./src/app/shared/components/yandex-maps/yandex-maps.component.html"],"names":[],"mappings":"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","file":"common.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { YandexHeatMapComponent } from './yandex-heat-map.component';\n\n\n\n@NgModule({\n    declarations: [YandexHeatMapComponent],\n    exports: [\n        YandexHeatMapComponent\n    ],\n    imports: [\n        CommonModule\n    ]\n})\nexport class YandexHeatMapModule { }\n","import { Injectable, Renderer2 } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class YandexMapService {\n  private readonly apiKey = '2db80c4c-704c-4382-906c-9dfe2e3baa8f';\n  private readonly statusScriptLoad = new BehaviorSubject<any>(null);\n  private readonly statusHeartMapScriptLoad = new BehaviorSubject<any>(null);\n\n\n  constructor() { }\n\n\n  public loadScript(render: Renderer2): Observable<any> {\n    if (!this.statusScriptLoad.value) {\n      const functionName = 'initYandexMap';\n\n      window[functionName] = () => {\n        const ymaps = window['ymaps'];\n        if (ymaps) {\n          this.statusScriptLoad.next(ymaps);\n        }\n      };\n\n      const mapScript = render.createElement('script');\n      mapScript.type = 'text/javascript';\n      mapScript.src = `https://api-maps.yandex.ru/2.1/?lang=ru_RU&onload=${functionName}&apikey=${this.apiKey}`;\n\n      document.head.appendChild(mapScript);\n    }\n\n    return this.statusScriptLoad.asObservable();\n  }\n\n\n  public loadHearMapScript(render: Renderer2): Observable<any> {\n    if (!this.statusHeartMapScriptLoad.value) {\n      this.statusHeartMapScriptLoad.next(true);\n\n      const mapScript = render.createElement('script');\n      mapScript.type = 'text/javascript';\n      mapScript.src = 'https://yastatic.net/s3/mapsapi-jslibs/heatmap/0.0.1/heatmap.min.js';\n\n      document.head.appendChild(mapScript);\n    }\n\n    return this.statusHeartMapScriptLoad.asObservable();\n  }\n}\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output, SimpleChanges\n} from '@angular/core';\nimport { MapPinItem } from '../../interfaces/map-pin-item';\nimport { UntilDestroy } from '@ngneat/until-destroy';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { untilDestroyed } from 'ngx-take-until-destroy';\nimport { BehaviorSubject } from 'rxjs';\n\n\n@UntilDestroy()\n@Component({\n  selector: 'app-yandex-heat-map',\n  templateUrl: './yandex-heat-map.component.html',\n  styleUrls: ['./yandex-heat-map.component.scss']\n})\nexport class YandexHeatMapComponent implements OnInit, OnChanges, OnDestroy {\n  @Input() public readonly mapCenter: [number, number];\n  @Input() public readonly mapZoom = 10;\n  @Input() public pinDataList: MapPinItem[] = [];\n  @Input() public heatMapData: [number, number][];\n  @Output() public readonly afterMapInit = new EventEmitter<boolean>();\n  public readonly rndNumber = Math.round(Math.random() * 100000).toString();\n  public readonly id = 'yandex-map-' + this.rndNumber;\n\n  private readonly mapCenterDefault = [55.76, 37.62];\n  private mapInstance: any;\n  private readonly pinSrcDefault = '/f/media/ui/circle.svg';\n  private readonly pinSize = [10, 10];\n  private readonly pinOffset = [-5, -5];\n  private readonly zoomEvent = new BehaviorSubject<number>(0);\n  private heatMapRadius = 10;\n  // private readonly heatMapRadius = new BehaviorSubject<number>(10);\n  public heatMapOptions = new BehaviorSubject({\n    radius: 10,\n  });\n\n\n  constructor() { }\n\n\n  // =========================================================================\n  // --- Lifecycle Hooks -----------------------------------------------------\n  // -------------------------------------------------------------------------\n\n  public ngOnInit(): void {\n    this.loadMap();\n  }\n\n  public ngOnChanges(changes: SimpleChanges): void {\n    if (this.mapInstance && changes['pinDataList']) {\n      this.addHeatMap();\n    }\n  }\n\n\n  public ngOnDestroy(): void {\n  }\n\n\n  // =========================================================================\n  // --- Публичные и методы шаблона ------------------------------------------\n  // -------------------------------------------------------------------------\n\n\n  // =========================================================================\n  // --- Вспомогательные методы ----------------------------------------------\n  // -------------------------------------------------------------------------\n\n  private loadMap(): void {\n\n    const ymaps = window['ymaps'];\n    ymaps.ready(['Heatmap']).then(() => {\n      this.mapInstance = new ymaps.Map(this.id, {\n        center: this.mapCenter || this.mapCenterDefault,\n        zoom: this.mapZoom,\n        controls: ['zoomControl', 'typeSelector'],\n      }, {\n        minZoom: 4,\n      });\n\n      this.mapInstance.behaviors.disable('scrollZoom');\n\n      if (this.heatMapData && this.heatMapData.length) {\n        this.addHeatMap();\n        this.startZoomEventListener();\n      }\n\n      // this.addPlaceMarks();\n\n      this.afterMapInit.emit(true);\n    });\n  }\n\n\n  /**\n   * Метод добавляет на карты пины, переданные через инпут компонента\n   */\n  private addPlaceMarks(): void {\n    const ymaps = window['ymaps'];\n    if (!ymaps) { return; }\n\n    if (this.pinDataList && this.pinDataList.length) {\n\n      this.pinDataList.forEach(pin => {\n\n        const hintLayout = ymaps.templateLayoutFactory.createClass(pin.hint || '', {\n          // Определяем метод getShape, который\n          // будет возвращать размеры макета хинта.\n          // Это необходимо для того, чтобы хинт автоматически\n          // сдвигал позицию при выходе за пределы карты.\n          getShape: function () {\n            const el = this.getElement();\n            let result = null;\n            if (el) {\n              const firstChild = el.firstChild;\n              result = new ymaps.shape.Rectangle(\n                new ymaps.geometry.pixel.Rectangle([\n                  [0, 0],\n                  [firstChild.offsetWidth, firstChild.offsetHeight]\n                ])\n              );\n            }\n            return result;\n          }\n        });\n\n        const placemark = new ymaps.Placemark(pin.map, {}, {\n          cursor: 'default',\n          hintLayout: pin.hint ? hintLayout : null,\n          iconLayout: 'default#image',\n          iconImageHref: pin.pinSrcDefault || this.pinSrcDefault,\n          iconImageSize: pin.pinSize || this.pinSize,\n          iconImageOffset: this.pinOffset,\n        });\n\n        this.mapInstance.geoObjects.add(placemark);\n\n      });\n    }\n  }\n\n\n  private addHeatMap(): void {\n\n    const ymaps = window['ymaps'];\n    if (!ymaps) { return; }\n\n    this.heatMapOptions\n      .pipe(untilDestroyed(this))\n      .subscribe(options => {\n        console.log(options);\n      });\n\n    const heatmap = new ymaps.Heatmap(this.heatMapData, {\n      // Радиус влияния.\n      radius: this.heatMapRadius,\n      // Нужно ли уменьшать пиксельный размер точек при уменьшении зума. False - не нужно.\n      dissipating: false,\n      // Прозрачность тепловой карты.\n      opacity: 0.8,\n      // Прозрачность у медианной по весу точки.\n      intensityOfMidpoint: 0.2,\n      // JSON описание градиента.\n      gradient: {\n        0.1: 'rgba(128, 255, 0, 0.7)',\n        0.2: 'rgba(255, 255, 0, 0.8)',\n        0.7: 'rgba(234, 72, 58, 0.9)',\n        1.0: 'rgba(162, 36, 25, 1)'\n      }\n    });\n    // console.log(hearMapData);\n    heatmap.setMap(this.mapInstance);\n  }\n\n\n  /**\n   * Метод запускает обработку события изменения зума\n   */\n  private startZoomEventListener(): void {\n    this.zoomEvent.next(this.mapZoom);\n\n    this.mapInstance.events.add('boundschange', e => {\n      const newZoom = e.originalEvent.newZoom;\n\n      if (newZoom !== this.zoomEvent.getValue()) {\n        this.zoomEvent.next(e.originalEvent.newZoom);\n      }\n    });\n\n    this.zoomEvent.asObservable()\n      .pipe(\n        untilDestroyed(this),\n        distinctUntilChanged()\n      )\n      .subscribe(zoom => {\n        this.heatMapRadius = 20;\n\n        this.heatMapData['radius'] = 30;\n        // console.log('changePinByZoom', zoom);\n        // console.log('zoomEvent', this.zoomEvent);\n        // this.changePinByZoom(zoom)\n      });\n  }\n\n}\n","<div [id]=\"id\" class=\"map yandex-maps\"></div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { YandexMapsComponent } from './yandex-maps.component';\n\n\n\n@NgModule({\n    declarations: [YandexMapsComponent],\n    exports: [\n        YandexMapsComponent\n    ],\n    imports: [\n        CommonModule\n    ]\n})\nexport class YandexMapsModule { }\n","import {\n  Component,\n  EventEmitter,\n  Input, OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  Renderer2, SimpleChanges\n} from '@angular/core';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { filter } from 'rxjs/operators';\nimport { MapPinItem } from '../../interfaces/map-pin-item';\nimport { YandexMapService } from '../../services/yandex-map/yandex-map.service';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-yandex-maps',\n  templateUrl: './yandex-maps.component.html',\n  styleUrls: ['./yandex-maps.component.scss']\n})\nexport class YandexMapsComponent implements OnInit, OnChanges, OnDestroy {\n  @Input() public readonly mapCenter: [number, number];\n  @Input() public readonly mapZoom = 8;\n  @Input() public currentPin: MapPinItem;\n  @Input() public pinDataList: MapPinItem[] = [];\n  @Output() public readonly afterMapInit = new EventEmitter<boolean>();\n  public readonly rndNumber = Math.round(Math.random() * 100000).toString();\n  public readonly id = 'yandex-map-' + this.rndNumber;\n\n  private readonly mapCenterDefault = [55.76, 37.62];\n  private mapInstance: any;\n  private readonly pinSrcDefault = '/f/media/ui/circle.svg';\n  private readonly pinSize = [10, 10];\n  private readonly pinOffset = [-5, -5];\n\n\n  constructor(\n    private render: Renderer2,\n    private yandexMapService: YandexMapService,\n  ) { }\n\n\n  // =========================================================================\n  // --- Lifecycle Hooks -----------------------------------------------------\n  // -------------------------------------------------------------------------\n\n  public ngOnInit(): void {\n    this.loadMap();\n  }\n\n\n  public ngOnChanges(changes: SimpleChanges): void {\n    if (this.mapInstance && changes['pinDataList']) {\n      // this.addPlaceMarks();\n    }\n  }\n\n\n  public ngOnDestroy(): void {\n  }\n\n\n  // =========================================================================\n  // --- Публичные и методы шаблона ------------------------------------------\n  // -------------------------------------------------------------------------\n\n\n  // =========================================================================\n  // --- Вспомогательные методы ----------------------------------------------\n  // -------------------------------------------------------------------------\n\n  private loadMap(): void {\n\n    const ymaps = window['ymaps'];\n    ymaps.ready(['Heatmap']).then(() => {\n      this.mapInstance = new ymaps.Map(this.id, {\n        center: this.mapCenter || this.mapCenterDefault,\n        zoom: this.mapZoom,\n        controls: [],\n      }, {\n        minZoom: 4,\n      });\n\n      this.mapInstance.behaviors.disable('scrollZoom');\n      this.addCurrentPoint();\n      // this.addPlaceMarks();\n\n      this.afterMapInit.emit(true);\n    });\n\n  }\n\n\n  private addCurrentPoint(): void {\n    const ymaps = window['ymaps'];\n    if (!ymaps) { return; }\n\n    const placemark = new ymaps.Placemark(this.currentPin.map, {}, {\n      cursor: 'default',\n      hintLayout: null,\n      iconColor: '#FF0000'\n    });\n\n    this.mapInstance.geoObjects.add(placemark);\n  }\n\n\n  /**\n   * Метод добавляет на карты пины, переданные через инпут компонента\n   */\n  private addPlaceMarks(): void {\n    const ymaps = window['ymaps'];\n    if (!ymaps) { return; }\n\n    if (this.pinDataList && this.pinDataList.length) {\n\n      this.pinDataList.forEach(pin => {\n\n        const hintLayout = ymaps.templateLayoutFactory.createClass(pin.hint || '', {\n          // Определяем метод getShape, который\n          // будет возвращать размеры макета хинта.\n          // Это необходимо для того, чтобы хинт автоматически\n          // сдвигал позицию при выходе за пределы карты.\n          getShape: function () {\n            const el = this.getElement();\n            let result = null;\n            if (el) {\n              const firstChild = el.firstChild;\n              result = new ymaps.shape.Rectangle(\n                new ymaps.geometry.pixel.Rectangle([\n                  [0, 0],\n                  [firstChild.offsetWidth, firstChild.offsetHeight]\n                ])\n              );\n            }\n            return result;\n          }\n        });\n\n        const placemark = new ymaps.Placemark(pin.map, {}, {\n          cursor: 'default',\n          hintLayout: pin.hint ? hintLayout : null,\n          iconLayout: 'default#image',\n          iconImageHref: pin.pinSrcDefault || this.pinSrcDefault,\n          iconImageSize: pin.pinSize || this.pinSize,\n          iconImageOffset: this.pinOffset,\n        });\n\n        this.mapInstance.geoObjects.add(placemark);\n\n      });\n    }\n  }\n\n}\n","<div [id]=\"id\" class=\"map yandex-maps\"></div>\n"],"sourceRoot":"webpack:///"}